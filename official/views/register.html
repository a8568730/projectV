<style>
.register_supplement{
  margin:15px;
  margin-top:5px;
}
.register_supplement td, .register_supplement th{
  text-align:left;
  padding:5px;
  padding-right:10px;
  margin-left:10px;
  margin-right:10px;

  border:1px solid #cccccc;
}

.register_supplement th {
  font-weight:bold;
  /*border-bottom:1px solid #cccccc;*/
}
/*
.register_supplement .border_right{
  border-right:1px solid #cccccc;
}

.register_supplement .border_bottom{
  border-bottom:1px solid #cccccc;
}
*/
.register .hr_double_img{
  position:relative;
  margin-top:30px;
  margin-bottom:30px;
}

.register .hr_double, .register .hr_single{
  position:relative;
  margin-top:10px;
  margin-bottom:10px;
}

.register .hr_double_img hr, .register .hr_double hr{
  border-top: 2px solid #B6203F;
  border-bottom: 2px solid #B6203F;
  height: 5px;
  margin-bottom: 0;
}

.register .hr_single hr{
  border-top: 2px solid #B6203F;
  border-bottom: 0px ;
  height: 0px;
  margin-bottom: 0;
}

.register .hr_double_img img{
  position: absolute;
  left: 50%;
  margin-left: -25px;
  width: 50px;
  top: -25px;
}
.register p{
  margin:15px;
}
.register .darkred ,.register a{
  color:#B6203F;
}
.register .button_1, .register .button_2{
  cursor:pointer;
  display:inline-block;
  padding-top:5px;
  padding-bottom:5px;
  margin:0px;
  background:none;
  border:0px;
  background-size: 100% 100%;
  width:70px;
  height:30px;
  text-align:center;
}

.register .button_1{
  background-image: url('images/reg_button_1.svg');
  color:#ffffff;
}

.register .button_2{
  background-image: url('images/reg_button_2.svg');
  color:#B6203F;
}

.register .button_3{
  cursor:pointer;
  display:inline-block;
  padding-top:11px;
  padding-bottom:11px;
  margin:0px;
  background:none;
  border:0px;
  background-size: 100% 100%;
  width:110px;
  height:40px;
  text-align:center;
  background-image: url('images/reg_button_1.svg');
  color:#ffffff;
}

</style>

<form action="" name="content.register">
<div class="register">
  <div class="modal-body">
    
    

    <div class="text-center" style="width:100%;">
      <img src="images/register_header.svg" style="width:100%;"></img>
    </div>

    <div class="hr_double_img">
      <img src="images/citizen-v.png" alt="citizen V">
      <hr >
    </div>

    <div class="row" data-ng-show="editState < 2">
      <div class="col-xs-3 text-center">
        <div data-ng-show="logged && (unregster == 2)">
          <img class="img-circle" src="http://graph.facebook.com/{{content.userid}}/picture?type=square" 
            style="margin-bottom:10px; border: 3px solid #B6203F"> <br/>
          <div type="button" class="button_3" data-ng-click="logout()">
            <i class="fa fa-facebook-square" style="font-size:large"></i> Logout</div>
        </div>
        <div data-ng-show="!logged">
          <div type="button" class="button_3" 
            data-ng-click="intentLogin()"><i class="fa fa-facebook-square" style="font-size:large"></i> Login</div>
        </div>
      </div>
      <div class="col-xs-9">
        <p style="margin-top:0px;margin-bottom:0px">
          勇敢的勇士<strong class="darkred">{{fbname}}</strong>呀！<br/>
          感激你勇敢的站出來，為台灣的民主貢獻一份心力！<br/>
          我們需要你的協助一同把這個可惡的大魔王給幹掉！<br/>
        </p>
        <p style="margin-bottom:0px">
          ※若無法正常登入facebook，或此頁無法正常顯示，<br/>
          請到<a href="http://appy.tw/county/" target="_blank">自己的里自己顧</a>報名。
        </p>
      </div>
    </div>
    
    <div data-ng-show="editState == 2">
      <p>正在傳送您的報名資料，請稍候...</p>
    </div>

    <div data-ng-show="editState == 3">
      <p>報名成功，謝謝您的參與！</p>
    </div>


    <div class="hr_single" data-ng-show="logged && (editState < 2)">
      <hr >
    </div>

    <p data-ng-show="logged && (unregster == 1)">
      您已經登記報名過了
      <strong ng-show="regscope.type == 'volunteer'">
        志工參戰
      </strong>
      <strong ng-show="regscope.type == 'supplement'">
        物資參戰 
      </strong>
    </p>

    <div data-ng-show="logged && (unregster == 2)">
      <span data-ng-show="editState == 0">
        <p ng-show="!regscope.nonArea">
          勇者呀！該想要在哪裡紮營？（認養的投開票所）<br/>
          <strong>{{content.votestat}}</strong>
        </p>
        <p>
          勇者呀！該如何稱呼您呢？<strong>（請填入暱稱，會在營地顯示出來唷！）</strong><br/>
          <input type="text" name="name" required data-ng-model="content.name"></input>
        </p> 
        <p>
          勇者呀！該如何聯繫你呀？<strong>（請填入手機，重大訊息會在重要時刻與你聯繫！）</strong><br/>
          <input type="text" name="phone" required data-ng-model="content.phone"></input>
        </p> 
        <p >
          勇者呀！該如何寄資訊給你呀？<strong>（請填入E-Mail）</strong><br/>
          <input type="email" name="email" required data-ng-model="content.email"></input>
        </p> 
        <span ng-show="regscope.type == 'supplement'">
          <p style="margin-bottom:5px">
            想要捐贈什麼物資裝備？<strong>（想要幫忙提供什麼物資？）</strong><br/>
          </p>
          <table class="register_supplement">
            <tr>
              <th><strong>項目</strong></th>
              <th ng-repeat="(ikey,ival) in regscope.selectItems">
                {{ ival[1] }}  
              </th>
            </tr>
            <tr ng-show="!regscope.nonArea">
              <td><strong>尚缺</strong></td>
              <td ng-repeat="(ikey,ival) in regscope.selectItems">
                  {{ regscope.supCount[ikey] + content.supplement[ikey] }}/{{ ival[0] * regscope.supWeight }}
              </td>
            </tr>
            <tr>
              <td><strong>我要提供</strong></td>
              <td ng-repeat="(ikey,ival) in regscope.selectItems">
                <input type="number" name="supplement[ikey]" style="width:40px;" ng-model="content.supplement[ikey]" min="0" required > 
              </td>
            </tr>
          </table>
        </span>
        <span ng-show="regscope.nonArea">
          <p style="margin-bottom:5px">
            <strong>不分區志願序</strong><br/>
          </p>
          <table class="register_supplement">
            <tr>
              <th ng-repeat="i in [0,1,2]">
                志願{{i+1}}
              </th>
            </tr>
            <tr>
              <td ng-repeat="i in [0,1,2]">
                <select ng-model="content.areaOrder[i]" 
                  ng-options="ns for ns in regscope.nonAreaSelect"></select><br/>
              </td>
            </tr>
          </table>
            <!--<select ng-model="content.areaOrder[0]" 
              ng-options="ns for ns in regscope.nonAreaSelect"></select><br/>
            志願2：<select ng-model="content.areaOrder[1]" 
              ng-options="ns for ns in regscope.nonAreaSelect"></select><br/>
            志願3：<select ng-model="content.areaOrder[2]" 
              ng-options="ns for ns in regscope.nonAreaSelect"></select><br/>-->
        </span>
        <p>
          <input type="checkbox" data-ng-model="regscope.fbshare">分享到facebook<br>
        </p>
      </span>

      <span data-ng-show="editState == 1">
        <p>
          <strong  style="color:#ff0000">請確認您的報名資料是否正確</strong>
        </p>
        <p ng-show="!regscope.nonArea">
          <strong>認養的投開票所：</strong><br/>
          <span class="darkred">{{content.votestat}}</span>
        </p>
        <p>
          <strong>暱稱：</strong><br/>
          <span class="darkred">{{content.name}}</span>
        </p> 
        <p>
          <strong>手機號碼：</strong><br/>
          <span class="darkred">{{content.phone}}</span>
        </p> 
        <p>
          <strong>E-Mail：</strong><br/>
          <span class="darkred">{{content.email}}</span>
        </p> 

        <span ng-show="regscope.type == 'supplement'">
          <p style="margin-bottom:5px">
            <strong>提供物資：</strong><br/>
          </p>
          <table class="register_supplement">
            <tr>
              <th><strong>項目</strong></th>
              <th ng-repeat="(ikey,ival) in regscope.selectItems">
                {{ ival[1] }}  
              </th>
            </tr>
            <tr ng-show="!regscope.nonArea">
              <td><strong>尚缺</strong></td>
              <td ng-repeat="(ikey,ival) in regscope.selectItems">
                  {{ regscope.supCount[ikey] + content.supplement[ikey] }}/{{ ival[0] * regscope.supWeight }}
              </td>
            </tr>
            <tr>
              <td><strong>我要提供</strong></td>
              <td ng-repeat="(ikey,ival) in regscope.selectItems">
                <span class="darkred">{{content.supplement[ikey]}}</span>
              </td>
            </tr>
          </table>
        </span>
        <span ng-show="regscope.nonArea">
          <p style="margin-bottom:5px">
            <strong>不分區志願序：</strong><br/>
          </p>
          <table class="register_supplement">
            <tr>
              <th ng-repeat="i in [0,1,2]">
                志願{{i+1}}
              </th>
            </tr>
            <tr>
              <td ng-repeat="i in [0,1,2]">
                <span class="darkred">{{content.areaOrder[i]}} </span>
              </td>
            </tr>
          </table>
        </span>

        <p>
          分享到facebook：
          <span class="darkred">
            {{regscope.fbshare && '是' || '否'}}
          </span>
        </p>
      </span>
    </div>


    <div class="hr_double">
      <hr >
    </div>

    <div  data-ng-show="editState != 2">
      <div class="row">
        <div class="col-xs-8">
          <p class="bg-danger text-danger" style="text-align:left" data-ng-show="editState == 0">
            {{regscope.errors}}
          </p>
        </div>
        <div class="col-xs-4" style="text-align:right">
          <div class="button_1" data-ng-click="send()"  data-ng-show="logged && (unregster == 2)">
            <span data-ng-show="editState == 0">Next</span>
            <span data-ng-show="editState == 1">Send</span>
            <span data-ng-show="editState == 3">Close</span>
          </div>
          <div class="button_2" data-ng-click="editState = 0"  data-ng-show="logged && (unregster == 2) && (editState == 1)"><span>Back</span></div>
          <div class="button_2" data-ng-click="cancel()" data-ng-show="editState == 0" ><span>Cancel</span></div>
        </div>
      </div>
    </div>

  </div>

</div>

</form>

